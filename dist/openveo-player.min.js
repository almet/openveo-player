/* openveo-player v1.1.0 */
"use strict";!function(a){var b=a.module("ov.player",[]);if("undefined"==typeof ovPlayerDirectory||"string"!=typeof ovPlayerDirectory)throw new Error("ovPlayerDirectory global variable must be defined and set to the root path of the openVeo player");b.constant("i18nTranslations",{en:{VIDEO_TAB_TITLE:"Video",INDEX_TAB_TITLE:"Index",CHAPTERS_TAB_TITLE:"Chapters",LOADING:"Loading...",MEDIA_NO_SOURCE:"A network error caused the video download to fail part-way.",MEDIA_ERR_NETWORK:"A network error caused the video download to fail part-way.",MEDIA_ERR_DECODE:"The video playback was aborted due to a corruption problem or because the video used features your browser did not support.",MEDIA_ERR_SRC_NOT_SUPPORTED:"The video could not be loaded, either because the server or network failed or because the format is not supported.",MEDIA_ERR_DEFAULT:"An unknown error occurred."},fr:{VIDEO_TAB_TITLE:"Vidéo",INDEX_TAB_TITLE:"Index",CHAPTERS_TAB_TITLE:"Chapitres",LOADING:"Chargement...",MEDIA_NO_SOURCE:"Une erreur réseau à causé l'échec du téléchargement de la vidéo.",MEDIA_ERR_NETWORK:"Une erreur réseau à causé l'échec du téléchargement de la vidéo.",MEDIA_ERR_DECODE:"La lecture de la vidéo a été abandonnée en raison d' un problème de corruption ou parce que la vidéo utilise des fonctionnalités que votre navigateur ne supporte pas.",MEDIA_ERR_SRC_NOT_SUPPORTED:"La vidéo ne peut être chargée , soit parce que le serveur ou le réseau à échoué ou parce que le format ne sont pas supportées.",MEDIA_ERR_DEFAULT:"Une erreur inconnue est survenue."}})}(angular),function(a){function b(a){return{require:["^ovPlayer","^ovTabs"],restrict:"E",templateUrl:ovPlayerDirectory+"templates/chapters.html",scope:!0,link:a}}a.factory("ovChaptersLink",function(){return function(a,b,c,d){a.open=function(b){b.description&&""!=b.description&&(b.isOpen||angular.forEach(a.chapters,function(a){a.isOpen=!1}),b.isOpen=!b.isOpen)},a.goToTimecode=function(b){var c=d[0],e=d[1];1>=b&&c.setTime(b*a.duration),e.selectTabs("media")}}}),a.directive("ovChapters",b),b.$inject=["ovChaptersLink"]}(angular.module("ov.player")),function(a){function b(a){return{require:["^ovPlayer","^ovTabs"],restrict:"E",templateUrl:ovPlayerDirectory+"templates/index.html",scope:!0,link:a}}a.factory("ovIndexLink",function(){return function(a,b,c,d){a.timecodes.length&&(a.imagePreview=a.timecodes[0].image.large),a.setImagePreview=function(b){a.imagePreview=a.timecodesByTime[b].image.large},a.goToTimecode=function(b){var c=d[0],e=d[1];b<=a.duration&&c.setTime(b),e.selectTabs("media")}}}),a.directive("ovIndex",b),b.$inject=["ovIndexLink"]}(angular.module("ov.player")),function(a){function b(){function a(){}return a.prototype.init=function(a,b){if(!a||!b)throw new Error("A player JQLite Element and a media object are expected as Player arguments");this.jPlayerElement=a,this.media=b,this.playerId="player_"+this.media.mediaId},a.prototype.getMediaId=function(){return this.media.mediaId},a.prototype.getId=function(){return this.playerId},a.prototype.getMediaUrl=function(){throw new Error("getMediaUrl method not implemented for this player")},a.prototype.getAvailableDefinitions=function(){throw new Error("getAvailableDefinitions method not implemented for this player")},a.prototype.getMediaThumbnail=function(){throw new Error("getMediaThumbnail method not implemented for this player")},a.prototype.initialize=function(){throw new Error("initialize method not implemented for this player")},a.prototype.load=function(){throw new Error("load method not implemented for this player")},a.prototype.isPaused=function(){throw new Error("isPaused method not implemented for this player")},a.prototype.playPause=function(){throw new Error("play method not implemented for this player")},a.prototype.setVolume=function(){throw new Error("setVolume method not implemented for this player")},a.prototype.setTime=function(){throw new Error("setTime method not implemented for this player")},a.prototype.getPlayerType=function(){throw new Error("getPlayerType method not implemented for this player")},a.prototype.destroy=function(){throw new Error("destroy method not implemented for this player")},a}a.factory("OvPlayer",b)}(angular.module("ov.player")),function(a,b){function c(b,c,e,f,g,h,i){return{restrict:"E",templateUrl:ovPlayerDirectory+"templates/player.html",scope:{ovData:"=",ovFullscreenIcon:"=?",ovVolumeIcon:"=?",ovModeIcon:"=?",ovSettingsIcon:"=?",ovTime:"=?",ovFullViewport:"=?",ovLanguage:"@?",ovPlayerType:"@?",ovAutoPlay:"@?"},controller:["$scope","$element",function(j,k){function l(){return J.requestFullScreen||J.mozRequestFullScreen||J.webkitRequestFullScreen||J.msRequestFullscreen}function m(){return 1==("ontouchstart"in window||window.DocumentTouch&&H instanceof DocumentTouch)}function n(a){g(function(){var b=j.$root.$$phase;"$apply"===b||"$digest"===b?a():j.$apply(a)},1)}function o(a){if(j.timecodes.length){for(var b=0;b<j.timecodes.length;b++)if(a>j.timecodes[b].timecode&&j.timecodes[b+1]&&a<j.timecodes[b+1].timecode)return j.timecodes[b].timecode;return j.timecodes[j.timecodes.length-1].timecode}return 0}function p(a){n(function(){j.volumePreview=Math.round((M.bottom-a.pageY)/N*100)})}function q(){c.off("mousemove",p),a.element(L).off("mouseout",q),n(function(){j.volumePreview=0})}function r(a){var b=o((a.pageX-O.left)/P*j.duration);n(function(){j.timecodesByTime[b]&&(j.timePreview=j.timecodesByTime[b].image.large),j.timePreviewPosition=(a.pageX-O.left)/P*100})}function s(){c.off("mousemove",r),a.element(K).off("mouseout",s),n(function(){j.timePreviewPosition=0,j.timePreviewOpened=!1})}function t(){j.displayIndexTab=!1,j.selectedMode=d[0]}function u(){j.displayIndexTab=!0,j.selectedMode=d[1]}function v(){j.displayChapterTab=!1}function w(){j.displayChapterTab=!0}function x(){j.chapters=h.getMediaChapters()||[],j.chapters.length?(j.displayChapterTab=j.chapters.length,w()):v()}function y(){j.timecodes=h.getMediaTimecodes()||[],j.timecodesByTime=h.getMediaTimecodesByTime()||{},j.timecodes.length?(j.timePreview=j.presentation=j.timecodes[0].image.large,u()):t()}function z(){if(j.data.mediaId){var a=j.ovPlayerType||j.data.type||"html";switch(j.mediaTemplate=ovPlayerDirectory+"templates/"+a+".html",a.toLowerCase()){case"vimeo":var c=b.get("OvVimeoPlayer");j.player=new c(k,j.data);break;case"html":var d=b.get("OvHTMLPlayer");j.player=new d(k,j.data);break;default:throw new Error("Player "+a+" is not supported")}}}function A(){j.player&&("html"===j.player.getPlayerType()&&j.player.getAvailableDefinitions()||(j.ovSettingsIcon=!1),m()&&(j.ovVolumeIcon=!1),j.displayIndexTab||(j.ovModeIcon=!1),j.ovFullViewport&&!l()&&(j.fullscreenButton="reduce",G=!0),i.setLanguage(j.ovLanguage))}function B(){j.data=a.copy(j.ovData)||{},h.setMedia(j.data),z(),j.player&&(j.isCut=j.data.cut&&j.data.cut.length,j.timecodes=[],j.timecodesByTime={},j.chapters=[],j.presentation=null,j.playerId=j.player.getId(),j.timePreviewOpened=!1,j.volumeOpened=!1,j.modesOpened=!1,j.definitionOpened=!1,j.modes=a.copy(d),j.selectedMode=d[1],j.playPauseButton="play",j.fullscreenButton="enlarge",j.volumePreview=0,j.volume=100,j.loadedStart=0,j.loadedPercent=0,j.seenPercent=0,j.time=0,j.duration=0,j.timePreviewPosition=0,j.displayIndexTab=!0,j.displayChapterTab=!0,j.mediaThumbnail=j.player.getMediaThumbnail(),j.mediaDefinitions=j.player.getAvailableDefinitions(),j.selectedDefinition=j.mediaDefinitions&&j.mediaDefinitions[j.mediaDefinitions.length-1]||null,j.mediaUrl=j.selectedDefinition?e.trustAsResourceUrl(j.selectedDefinition.link):e.trustAsResourceUrl(j.player.getMediaUrl()),j.loading=!0,j.initializing=!0,j.error=null,j.isCut?(j.displayChapterTab=!1,t(),v()):(y(),x()),A())}function C(){D&&g.cancel(D),(j.modesOpened||j.definitionOpened||j.volumeOpened)&&(D=g(function(){j.modesOpened=j.definitionOpened=j.volumeOpened=!1},3e3))}var D,E=this,F=0,G=!1,H=c[0],I=k[0],J=k.children()[0],K=I.getElementsByClassName("ov-time-ghost")[0],L=I.getElementsByClassName("ov-volume-ghost")[0],M=L.getBoundingClientRect(),N=M.bottom-M.top,O=K.getBoundingClientRect(),P=O.right-O.left;j.player=null,j.ovFullscreenIcon="undefined"==typeof j.ovFullscreenIcon?!0:j.ovFullscreenIcon,j.ovVolumeIcon="undefined"==typeof j.ovVolumeIcon?!0:j.ovVolumeIcon,j.ovModeIcon="undefined"==typeof j.ovModeIcon?!0:j.ovModeIcon,j.ovSettingsIcon="undefined"==typeof j.ovSettingsIcon?!0:j.ovSettingsIcon,j.ovTime="undefined"==typeof j.ovTime?!0:j.ovTime,j.ovFullViewport="undefined"==typeof j.ovFullViewport?!1:j.ovFullViewport,j.ovLanguage="undefined"==typeof j.ovLanguage?"en":j.ovLanguage;var Q="undefined"==typeof j.ovAutoPlay?!1:JSON.parse(j.ovAutoPlay);B(),j.toggleModes=function(){j.volumeOpened=!1,j.definitionOpened=!1,j.modesOpened=!j.modesOpened,C()},j.toggleVolume=function(){j.modesOpened=!1,j.definitionOpened=!1,j.volumeOpened=!j.volumeOpened,C()},j.toggleDefinition=function(){j.volumeOpened=!1,j.modesOpened=!1,j.definitionOpened=!j.definitionOpened,C()},j.toggleFullscreen=function(){J.requestFullScreen||J.mozRequestFullScreen||J.webkitRequestFullScreen||J.msRequestFullscreen?"undefined"!==H.fullScreenElement&&null===H.fullScreenElement||"undefined"!==H.msFullscreenElement&&null===H.msFullscreenElement||"undefined"!==H.mozFullScreen&&H.mozFullScreen===!1||"undefined"!==H.webkitFullscreenElement&&null===H.webkitFullscreenElement?(J.requestFullScreen?J.requestFullScreen():J.mozRequestFullScreen?J.mozRequestFullScreen():J.webkitRequestFullScreen?J.webkitRequestFullScreen():J.msRequestFullscreen&&J.msRequestFullscreen(),j.fullscreenButton="reduce"):(H.exitFullscreen?H.exitFullscreen():H.mozCancelFullScreen?H.mozCancelFullScreen():H.webkitExitFullscreen?H.webkitExitFullscreen():H.msExitFullscreen&&H.msExitFullscreen(),j.fullscreenButton="enlarge"):(G=j.ovFullViewport=!G,j.fullscreenButton=G?"reduce":"enlarge")},j.$on("$includeContentLoaded",function(){g(function(){j.player.initialize()},1)}),j.$watch("ovData",function(){j.data=a.copy(j.ovData)||{},!j.data.mediaId||j.player&&j.data.mediaId==j.player.getMediaId()||(j.player&&j.player.destroy(),B())}),j.$watch("ovModeIcon",A),j.$watch("ovVolumeIcon",A),j.$watch("ovSettingsIcon",A),j.$watch("ovFullViewport",A),j.setVolume=function(a){var b=Math.min(Math.round((M.bottom-a.pageY)/N*100),100);E.setVolume(b)},j.setTime=function(a){O=K.getBoundingClientRect(),P=O.right-O.left,E.setTime((a.pageX-O.left)/P*j.duration)},this.selectMode=j.selectMode=function(a){j.selectedMode=a},this.playPause=j.playPause=function(){j.loading||j.error||j.player.playPause()},this.setVolume=function(a){j.volume=a,j.player.setVolume(j.volume)},this.setTime=function(a){j.player.setTime(h.getRealTime(a))},this.setDefinition=j.setDefinition=function(a){a&&a.link!==j.selectedDefinition.link&&(F=j.time,Q=!j.player.isPaused(),j.selectedDefinition=a,j.mediaUrl=e.trustAsResourceUrl(j.selectedDefinition.link),j.loading=!0,j.initializing=!0,n(function(){j.player.load()}))},a.element(L).on("mouseover",function(){M=L.getBoundingClientRect(),N=M.bottom-M.top,c.on("mousemove",p),a.element(L).on("mouseout",q)}),a.element(K).on("mouseover",function(b){O=K.getBoundingClientRect(),P=O.right-O.left,j.timecodes&&j.timecodes.length&&(r(b),c.on("mousemove",r),a.element(K).on("mouseout",s),n(function(){j.timePreviewOpened=!0}))}),k.on("ovReady",function(a){return a.stopImmediatePropagation(),n(function(){j.player.setVolume(100),j.error=null,j.loading=!1,j.initializing=!1,E.setTime(F),k.triggerHandler("ready"),Q&&E.playPause()}),!1}),k.on("ovWaiting",function(a){return a.stopImmediatePropagation(),n(function(){j.loading=!0,k.triggerHandler("waiting")}),!1}),k.on("ovPlaying",function(a){return a.stopImmediatePropagation(),n(function(){j.loading=!1,j.playPauseButton="pause",k.triggerHandler("playing")}),!1}),k.on("ovDurationChange",function(a,b){return a.stopImmediatePropagation(),n(function(){h.setRealMediaDuration(b),j.duration=h.getCutDuration(),j.isCut&&(y(),x(),E.setTime(0)),k.triggerHandler("durationChange",j.duration)}),!1}),k.on("ovPlay",function(a){return a.stopImmediatePropagation(),n(function(){j.loading=!1,j.playPauseButton="pause",k.triggerHandler("play")}),!1}),k.on("ovPause",function(a){return a.stopImmediatePropagation(),n(function(){j.playPauseButton="play",k.triggerHandler("pause")}),!1}),k.on("ovLoadProgress",function(a,b){return a.stopImmediatePropagation(),n(function(){j.loadedStart=h.getCutPercent(b.loadedStart),j.loadedPercent=h.getCutPercent(b.loadedPercent),k.triggerHandler("loadProgress",{loadedStart:j.loadedStart,loadedPercent:j.loadedPercent})}),!1}),k.on("ovPlayProgress",function(a,b){if(a.stopImmediatePropagation(),!j.initializing){j.loading=!1;var c=o(b.time),d=function(){j.time=h.getCutTime(b.time),j.seenPercent=h.getCutPercent(b.percent),j.timecodesByTime[c]&&(j.presentation=j.timecodesByTime[c].image.large),k.triggerHandler("playProgress",{time:j.time,percent:j.seenPercent})};return h.getCutTime(b.time)>h.getCutDuration()?(j.player.setTime(h.getRealTime(0)),j.player.playPause()):n(d),!1}}),k.on("ovEnd",function(a){return a.stopImmediatePropagation(),n(function(){j.time=j.seenPercent=0,j.playPauseButton="play",j.timecodes.length&&(j.presentation=j.timecodes[0].image.large),j.isCut&&j.player.setTime(h.getRealTime(0)),k.triggerHandler("end")}),!1}),k.on("error",function(a,b){n(function(){switch(j.loading=!1,j.initializing=!1,b.target.error.code){case b.target.error.MEDIA_NO_SOURCE:j.error=f("ovTranslate")("MEDIA_NO_SOURCE");break;case b.target.error.MEDIA_ERR_NETWORK:j.error=f("ovTranslate")("MEDIA_ERR_NETWORK");break;case b.target.error.MEDIA_ERR_DECODE:j.error=f("ovTranslate")("MEDIA_ERR_DECODE");break;case b.target.error.MEDIA_ERR_SRC_NOT_SUPPORTED:j.error=f("ovTranslate")("MEDIA_ERR_SRC_NOT_SUPPORTED");break;default:j.error=f("ovTranslate")("MEDIA_ERR_DEFAULT")}})})}]}}var d=["media","both","both-presentation","presentation"];b.directive("ovPlayer",c),c.$inject=["$injector","$document","$sce","$filter","$timeout","playerService","i18nPlayerService"]}(angular,angular.module("ov.player")),function(a){function b(){function a(){return o&&m?o*m:0}function b(){return o?n?o*n:o:0}function c(b){return b+a()}function d(b){return Math.max(b-a(),0)}function e(a){if(l=a,p=l.cut&&l.cut.length){for(var b=0;b<l.cut.length;b++)"begin"===l.cut[b].type?m=Math.max(l.cut[b].value,0):"end"===l.cut[b].type&&(n=Math.min(l.cut[b].value,1));m===n&&(m=0,n=null)}else m=0,n=null}function f(){if(p&&o&&l.timecodes){for(var c=[],d=a(),e=b(),f=0;f<l.timecodes.length;f++){var g=l.timecodes[f].timecode;g>=d&&e>=g&&c.push(l.timecodes[f])}return c}return l.timecodes}function g(){var a={},b=f();if(b)for(var c=0;c<b.length;c++){var d=b[c];a[d.timecode]={image:{small:d.image.small,large:d.image.large}}}return a}function h(){if(p&&o&&l.chapters){for(var c=[],d=a(),e=b(),f=0;f<l.chapters.length;f++){var g=o*l.chapters[f].value;g>=d&&e>=g&&c.push(l.chapters[f])}return c}return l.chapters}function i(){if(o){var c=b(),d=a();return c-d}return 0}function j(b){if(o){var c=o*(b/100);return Math.min(Math.max((c-a())/i()*100,0),100)}return b}function k(a){o=a}var l=null,m=0,n=null,o=null,p=!1;return{setMedia:e,setRealMediaDuration:k,getMediaTimecodes:f,getMediaTimecodesByTime:g,getMediaChapters:h,getCutDuration:i,getRealTime:c,getRealCutStart:a,getRealCutEnd:b,getCutPercent:j,getCutTime:d}}a.factory("playerService",b),b.$inject=[]}(angular.module("ov.player")),function(a){function b(){return{restrict:"E",templateUrl:ovPlayerDirectory+"templates/tabs.html",scope:{},transclude:!0,controller:["$scope","$filter",function(a,b){a.views=[],a.select=function(b){angular.forEach(a.views,function(a){a.selected=!1}),b.selected=!0},this.selectTabs=function(c){var d=b("filter")(a.views,{viewId:c},!0);0!=d.length&&a.select(d[0])},this.addView=function(b){a.views.length||a.select(b),a.views.push(b)}}]}}a.directive("ovTabs",b)}(angular.module("ov.player")),function(a){function b(){return function(a){if(0>a||isNaN(a))return"";a=parseInt(a);var b=parseInt(a/1e3%60),c=parseInt(a/6e4%60),d=parseInt(a/36e5%24);return d=10>d?"0"+d:d,c=10>c?"0"+c:c,b=10>b?"0"+b:b,("00"!==d?d+":":"")+c+":"+b}}a.filter("millisecondsToTime",b)}(angular.module("ov.player")),function(a){function b(a){return{restrict:"E",require:"^ovTabs",transclude:!0,templateUrl:ovPlayerDirectory+"templates/view.html",scope:{title:"@",view:"@",viewId:"@"},link:a}}a.factory("ovViewLink",function(){return function(a,b,c,d){d.addView(a)}}),a.directive("ovView",b),b.$inject=["ovViewLink"]}(angular.module("ov.player")),function(a){function b(a){return function(b){return a.translate(b)}}a.filter("ovTranslate",b),b.$inject=["i18nPlayerService"]}(angular.module("ov.player")),function(a,b){function c(a){function b(b){return Object.keys(a).indexOf(b)>=0}function c(a){f=b(a)?a:"en"}function d(){return f}function e(b){var c=a[f]&&a[f][b]||b;return c===b&&(c=a.en[b]||b),c}var f=navigator.language||navigator.browserLanguage;return{translate:e,isLanguageSupported:b,setLanguage:c,getLanguage:d}}b.service("i18nPlayerService",c),c.$inject=["i18nTranslations"]}(angular,angular.module("ov.player")),function(a,b){function c(b,c,d){function e(a){switch(a.type){case"progress":if(1===this.player.buffered.length){var b=this.player.buffered.start(0)/this.player.duration,c=this.player.buffered.end(0)/this.player.duration;this.jPlayerElement.triggerHandler("ovLoadProgress",{loadedStart:100*Math.max(0,Math.min(b,1)),loadedPercent:100*Math.max(0,Math.min(c-b,1))})}break;case"durationchange":var d=this.player.duration||this.media.metadata&&this.media.metadata.duration;this.jPlayerElement.triggerHandler("ovDurationChange",1e3*d);break;case"loadeddata":this.loaded=!0,this.jPlayerElement.triggerHandler("ovReady");break;case"play":this.jPlayerElement.triggerHandler("ovPlay");break;case"pause":this.jPlayerElement.triggerHandler("ovPause");break;case"ended":this.jPlayerElement.triggerHandler("ovEnd");break;case"waiting":this.jPlayerElement.triggerHandler("ovWaiting");break;case"playing":this.jPlayerElement.triggerHandler("ovPlaying");break;case"timeupdate":var e=this.player.currentTime/this.player.duration*100;this.jPlayerElement.triggerHandler("ovPlayProgress",{time:1e3*this.player.currentTime,percent:e});break;case"error":this.jPlayerElement.triggerHandler("error",a)}}function f(a,c){b.prototype.init.call(this,a,c),this.media.files.sort(function(a,b){return a.height<b.height?1:-1})}var g=["loadeddata","progress","playing","waiting","ended","durationchange","timeupdate","play","pause","error"];return f.prototype=new b,f.prototype.constructor=f,f.prototype.getMediaThumbnail=function(){return this.media.thumbnail},f.prototype.initialize=function(){var b=this;this.loaded=!1,this.player=d[0].getElementById(this.playerId),this.handlePlayerEventsFn=a.bind(this,e);for(var c=a.element(this.player),f=0;f<g.length;f++)c.on(g[f],this.handlePlayerEventsFn);var h=this.player.getElementsByTagName("source"),i=a.element(h[h.length-1]);i.on("error",function(a){b.player.networkState==b.player.NETWORK_NO_SOURCE&&(a.target.error={code:"NO_SOURCE",MEDIA_NO_SOURCE:"NO_SOURCE"}),b.handlePlayerEventsFn(a)}),this.load()},f.prototype.load=function(){this.player.load()},f.prototype.isPaused=function(){return this.player.paused},f.prototype.playPause=function(){this.player.paused||this.player.ended?this.player.play():this.player.pause()},f.prototype.setVolume=function(a){this.player.volume=a/100},f.prototype.setTime=function(a){a=parseInt(a)||.1,this.player.currentTime=a/1e3},f.prototype.getPlayerType=function(){return"html"},f.prototype.getAvailableDefinitions=function(){return this.media.files},f.prototype.destroy=function(){this.handlePlayerEventsFn=a.bind(this,e);for(var b=a.element(this.player),c=0;c<g.length;c++)b.off(g[c],this.handlePlayerEventsFn);this.loaded=!1,this.player=null},f}b.factory("OvHTMLPlayer",c),c.$inject=["OvPlayer","$window","$document"]}(angular,angular.module("ov.player")),function(a,b){function c(b,c,d){function e(a,b){if(this.loaded){var c={method:a};return b&&(c.value=b),this.player.contentWindow.postMessage(JSON.stringify(c),this.postMessageTargetOrigin)}return null}function f(){this.postMessageTargetOrigin="https:"+this.getMediaUrl().split("?")[0],this.player=d[0].getElementById(this.playerId),this.loaded=!0,this.playing=0,e.call(this,"addEventListener","loadProgress"),e.call(this,"addEventListener","playProgress"),e.call(this,"addEventListener","play"),e.call(this,"addEventListener","pause"),e.call(this,"addEventListener","finish")}function g(a,b){if(b=a.data?JSON.parse(a.data):b,b.player_id===this.playerId){switch(b.event){case"ready":f.call(this),e.call(this,"getDuration"),this.jPlayerElement.triggerHandler("ovReady");break;case"loadProgress":this.jPlayerElement.triggerHandler("ovLoadProgress",{loadedStart:0,loadedPercent:100*b.data.percent});break;case"playProgress":b.data.percent<=1&&this.jPlayerElement.triggerHandler("ovPlayProgress",{time:1e3*b.data.seconds,percent:100*b.data.percent});break;case"play":this.playing=1,this.jPlayerElement.triggerHandler("ovPlay");break;case"pause":this.playing=0,this.jPlayerElement.triggerHandler("ovPause");break;case"finish":this.playing=0,this.jPlayerElement.triggerHandler("ovEnd")}switch(b.method){case"getDuration":this.duration=b.value||this.media.metadata&&this.media.metadata.duration,this.jPlayerElement.triggerHandler("ovDurationChange",1e3*this.duration);break;default:return}}}function h(){this.loaded=!1,this.handlePlayerEventsFn=a.bind(this,g),a.element(c).on("message",this.handlePlayerEventsFn)}function i(a,c){b.prototype.init.call(this,a,c),h.call(this)}return i.prototype=new b,i.prototype.constructor=i,i.prototype.getMediaUrl=function(){return"//player.vimeo.com/video/"+this.media.mediaId+"?api=1&player_id="+this.playerId},i.prototype.getMediaThumbnail=function(){return null},i.prototype.initialize=function(){},i.prototype.playPause=function(){e.call(this,this.playing?"pause":"play")},i.prototype.setVolume=function(a){e.call(this,"setVolume",a/100)},i.prototype.setTime=function(a){a=parseInt(a)||0,e.call(this,"seekTo",a/1e3),this.playing||this.jPlayerElement.triggerHandler("ovPlayProgress",{time:a,percent:a/this.duration*100})},i.prototype.getPlayerType=function(){return"vimeo"},i.prototype.getAvailableDefinitions=function(){return null},i.prototype.destroy=function(){a.element(c).off("message",this.handlePlayerEventsFn),this.loaded=!1,this.playing=0,this.player=null},i}b.factory("OvVimeoPlayer",c),c.$inject=["OvPlayer","$window","$document"]}(angular,angular.module("ov.player"));